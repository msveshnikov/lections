<div class="document">




<h4></h4>

<p>

Мы объединили эти три кажущиеся не очень близкими темы, потому что в Ingres для решения соответствующих проблем применяется единый подход, основанный на модификации операторов SQL. Начнем с представлений. Как и в System R (точнее, в языке SQL), представление базы данных - это некоторый именованный запрос с именованными полями результирующего отношения.

</p>
<p>

Например, оператор

</p>
<pre>DEFINE VIEW GROUP310

    (STUD_NUMBER = S.STUD_NUMBER,

     STUD_NAME = S.STUD_NAME,

     STUD_STATUS = S.STUD_STATUS)

WHERE (S.GROUP_NUMBER = 310)</pre>

<p>

определяет представляемое отношение, включающее номера студенческих билетов и имена студентов из группы 310.

</p>
<p>

Предположим, что мы хотим теперь найти неуспевающих студентов в отношении GROUP310:

</p>
<pre>RANGE OF G310 IS GROUP310

RETRIEVE (G310.STUD_NAME)

WHERE (G310.STUD_STATUS = "NO")</pre>

<p>

Тогда после модификации этот запрос будет выглядеть следующим образом:

</p>
<pre>RETRIEVE (STUD_NUMBER = S.STUD_NUMBER, STUD_NAME =

          S.STUD_NAME, STUD_STATUS = S.STUD_STATUS)

WHERE (S.GROUP_NUMBER = 310 AND

       S.STUD_STATUS = "NO")</pre>

<p>

На тех же самых принципах построен контроль доступа к данным и контроль целостности баз данных. Например, ограничение доступа к отношению СТУДЕНТЫ может быть определено следующим образом:

</p>
<pre>DEFINE PERMIT RETRIEVE, REPLACE

       ON     S

       TO     PETROV

       AT     TTA5

       FROM   9:00 TO 17:50

       ON     MON TO FRI

       WHERE  (S.GROUP_NUMBER = 310)</pre>

<p>

Это означает, что Петрову разрешается читать и модифицировать отношение СТУДЕНТЫ с терминала TTA5 во время от 9 до 15:00 в рабочие дни недели, причем только те кортежи, которые удовлетворяют сформулированному условию. При компиляции любого оператора QUEL над отношением СТУДЕНТЫ этот оператор будет модифицироваться таким образом, чтобы он был выполнен при выполнении условий хотя бы одного из ограничений доступа.

</p>
<p>

Аналогично, если для отношения СТУДЕНТЫ определено ограничение целостности

</p>
<pre>DEFINE INTEGRITY

    ON     S

    WHERE  (S.STUD_STIP &lt; 150,000)</pre>

<p>

то к условию любого оператора изменения кортежей отношения СТУДЕНТЫ будет через AND добавляться условия всех ограничений целостности, определенных для этого отношения.

</p>
<p>

В заключение этой лекции заметим, что конечно, в Ingres поддерживается механизм параллельных транзакций с соответствующей синхронизаций доступа и журнализация изменений баз данных. Однако нам не известны какие-либо особенности применяемых механизмов. На особенностях оптимизации операторов QUEL мы остановимся в лекции, посвященной оптимизациям в языках баз данных.

</p>
<p>

</p>
<p></p>
<center> ||  || <p>

</p>
<p></p>
</center>
</div>