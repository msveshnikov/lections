<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p><span>В группу регистров управления входят четыре регистра: cr0, cr1, cr2, cr3. Эти регистры предназначены для общего управления системой. Регистры управления доступны только программам с уровнем привилегий 0.</span></p>
<p><span>Хотя микропроцессор имеет четыре регистра управления, доступными являются только три из них – исключается cr1, функции которого пока не определены (он зарезервирован для будущего использования).</span></p>
<p><span>Регистр cr0 содержит системные флаги, управляющие режимами работы микропроцессора и отражающие его состояние глобально, независимо от конкретных выполняющихся задач.</span></p>
<p><span>Назначение системных флагов:</span></p>
<p><span>1) pe (Protect Enable), бит 0 – разрешение защищенного режима работы. Состояние этого флага показывает, в каком из двух режимов – реальном (pe = 0) или защищенном (pe = 1) – работает микропроцессор в данный момент времени;</span></p>
<p><span>2) mp (Math Present), бит 1 – наличие сопроцессора. Всегда 1;</span></p>
<p><span>3) ts (Task Switched), бит 3 – переключение задач. Процессор автоматически устанавливает этот бит при переключении на выполнение другой задачи;</span></p>
<p><span>4) am (Alignment Mask), бит 18 – маска выравнивания.</span></p>
<p><span>Этот бит разрешает (am = 1) или запрещает (am = 0) контроль выравнивания;</span></p>
<p><span>5) cd (Cache Disable), бит 30 – запрещение кеш-па-мяти.</span></p>
<p><span>С помощью этого бита можно запретить (cd = 1) или разрешить (cd = 0) использование внутренней кеш-памяти (кеш-памяти первого уровня);</span></p>
<p><span>6) pg (PaGing), бит 31 – разрешение (pg = 1) или запрещение (pg = 0) страничного преобразования.</span></p>
<p><span>Флаг используется при страничной модели организации памяти.</span></p>
<p><span>Регистр cr2 используется при страничной организации оперативной памяти для регистрации ситуации, когда текущая команда обратилась по адресу, содержащемуся в странице памяти, отсутствующей в данный момент времени в памяти.</span></p>
<p><span>В такой ситуации в микропроцессоре возникает исключительная ситуация с номером 14, и линейный 32-битный адрес команды, вызвавшей это исключение, записывается в регистр cr2. Имея эту информацию, обработчик исключения 14 определяет нужную страницу, осуществляет ее подкачку в память и возобновляет нормальную работу программы;</span></p>
<p><span>Регистр cr3 также используется при страничной организации памяти. Это так называемый регистр каталога страниц первого уровня. Он содержит 20-битный физический базовый адрес каталога страниц текущей задачи. Этот каталог содержит 1024 32-битных дескриптора, каждый из которых содержит адрес таблицы страниц второго уровня. В свою очередь, каждая из таблиц страниц второго уровня содержит 1024 32-битных дескриптора, адресующих страничные кадры в памяти. Размер страничного кадра – 4 Кбайта.</span></p>
</body></html>
