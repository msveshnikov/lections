<div class="document">




<h4></h4>

<pre>&lt;allocate descriptor statement&gt; ::=

   ALLOCATE DESCRIPTOR &lt;descriptor name&gt;

  [WITH MAX &lt;occurrences&gt;]

&lt;occurences&gt; ::= &lt;simple value specification&gt;

&lt;descriptor name&gt; ::=

 (&lt;scope option&gt;] &lt;simple value specification&gt;

  &lt;scope option&gt; ::= GLOBAL | LOCAL

&lt;simple value specification&gt; ::=

  &lt;parameter name&gt;

 (&lt;embedded variable name&gt;

 (&lt;literal&gt;</pre>

<p>

<i>Комментарий:</i>

</p>
<p>

Дескриптор, это динамически выделяемая часть памяти прикладной программы, служащая для принятия информации о результате или параметрах динамически подготовленного оператора SQL или задания параметров такого оператора. Смысл того, что для выделения памяти используется оператор SQL, а не просто стандартная функция alloc или какая-нибудь другая функция динамического запроса памяти, состоит в том, что прикладная программа не знает структуры дескриптора и даже его адреса. Это позволяет не привязывать SQL к особенностям какой-либо системы программирования или ОС. Все обмены информацией между собственно прикладной программой и дескрипторами производятся также с помощью специальных операторов SQL (GET и SET, см. ниже).

</p>
<p>

Второй вопрос: зачем вообще выделять память под дескрипторы динамически. Это нужно потому, что в общем случае прикладная программа, использующая динамический SQL, не знает в статике число одновременно действующих динамических операторов SQL, описание которых может потребоваться. С этим же связано то, что имя дескриптора может задаваться как литеральной строкой символов, так и через строковую переменную включающего языка, т.е. его можно генерировать во время выполнения программы.

</p>
<p>

В операторе ALLOCATE DESCRIPTOR, помимо прочего, может указываться число описательных элементов, на которое он рассчитан. Если, например, при выделении памяти под дескриптор в разделе WITH MAX указано целое положительное число N, а потом дескриптор используется для описания M (M&gt;N) элементов (например, M столбцов результата запроса), то это приводит к возникновению исключительной ситуации.



</p>
<p></p>
<center> ||  || <p>

</p>
<p></p>
</center>
</div>