<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p><span>Экземпляр объекта создается посредством описания переменной или константы объектного типа или путем применения стандартной процедуры New к переменной типа «указатель на объектный тип». Результирующий объект называется экземпляром объектного типа.</span></p>
<p><span>Если объектный тип содержит виртуальные методы, то экземпляры этого объектного типа должны инициализироваться посредством вызова конструктора перед вызовом любого виртуального метода.</span></p>
<p><span>Присваивание экземпляра объектного типа не подразумевает инициализации экземпляра. Объект инициализируется кодом, генерируемым компилятором, который выполняется между вызовом конструктора и моментом когда выполнение фактически достигает первого оператора в блоке кода конструктора.</span></p>
<p><span>Если экземпляр объекта не инициализируется и проверка диапазона включена (директивой {$R+}), то первый вызов виртуального метода экземпляра объекта дает ошибку этапа выполнения. Если проверка диапазона выключена директивой {$R—}), то первый вызов виртуального метода неинициализированного объекта может привести к непредсказуемому поведению.</span></p>
<p><span>Правило обязательной инициализации применимо также к экземплярам, которые являются компонентами структурных типов. Например:</span></p>
<p><span>var</span></p>
<p><span>Comment: array [1..5] of TStrField;</span></p>
<p><span>I: integer;</span></p>
<p><span>begin</span></p>
<p><span>for I:= 1 to 5 do</span></p>
<p><span>Comment [I].Init (1, I + 10, 40, 'первое_имя');</span></p>
<p><span>.</span></p>
<p><span>.</span></p>
<p><span>.</span></p>
<p><span>for I:= 1 to 5 do Comment [I].Done;</span></p>
<p><span>end;</span></p>
<div class="fb2-empty-line"> </div>
<p><span>Для динамических экземпляров инициализация, как правило, связана с размещением, а очистка – с удалением, что достигается благодаря расширенному синтаксису стандартных процедур New и Dispose. Например:</span></p>
<p><span>var</span></p>
<p><span>SP: StrFieldPtr;</span></p>
<p><span>begin</span></p>
<p><span>New (SP, Init (1, 1, 25, 'первое_имя');</span></p>
<p><span>SP^.Put ('Владимир');</span></p>
<p><span>SP^.Display;</span></p>
<p><span>.</span></p>
<p><span>.</span></p>
<p><span>.</span></p>
<p><span>Dispose (SP, Done);</span></p>
<p><span>end.</span></p>
<p><span>Указатель на объектный тип является совместимым по присваиванию с указателем на любой родительский объектный тип, поэтому во время выполнения программы указатель на объектный тип может указывать на экземпляр этого типа или на экземпляр любого дочернего типа.</span></p>
</body></html>
