<div class="span9 content pull-left">
<div class="banner">

  
  



</div>
<h2 id="vnosim-vklad-v-ruby-on-rails" class="inside_page_header"> Вносим вклад в Ruby on Rails</h2>
<p>Это руководство раскрывает способы, с помощью которых <em>ты</em> можешь стать частью продолжающейся разработки Ruby on Rails.</p>
<p>После прочтения этого руководства, вы узнаете:</p>
<ul>
<li>Как использовать GitHub для сообщения о проблемах.
</li>
<li>Как клонировать master и запустить тестовый набор.
</li>
<li>Как помочь в решении существующих проблем.
</li>
<li>Как внести вклад в документацию Ruby on Rails.
</li>
<li>Как внести вклад в код Ruby on Rails.
</li>
</ul>
<p>Ruby on Rails — это не "чей-то там фреймворк". На протяжение лет сотни людей вносили вклад в Ruby on Rails, от одиночного символа до огромных архитектурных изменений или значимой документации — и все это с целью сделать Ruby on Rails лучше для каждого. Даже если вы пока не готовы писать код или документацию, имеется ряд других способов, которыми вы можете внести вклад, от сообщений о проблемах до тестирования новых изменений.</p>

<h3 id="soobschenie-o-probleme" class="inside_page_header"> Сообщение о проблеме</h3>
<p>Ruby on Rails использует  для отслеживания проблем (в основном, багов и нового кода). Если вы нашли баг в Ruby on Rails, нужно начать отсюда. Чтобы сообщить о проблеме, прокомментировать ее или создавать пул-реквесты, необходимо создать аккаунт (бесплатный) на GitHub.</p>
<div class="note"><p>Багам в самой последней версии Ruby on Rails уделяется наибольшее внимание. Также, основная команда Rails всегда заинтересована в обратной связи от тех, у кого есть время потестировать <em>edge Rails</em> (код версии Rails, которая разрабатывается в текущий момент). Позже в этом руководстве будет рассказано, как получить edge Rails для тестирования.</p></div>
<h4 id="sozdanie-otcheta-o-bage" class="inside_page_header"> Создание отчета о баге</h4>
<p>Если вы обнаружили проблему в Ruby on Rails, не несущую риск безопасности, произведите поиск по , о ней уже может быть сообщено. Если вы не обнаружили какую-либо открытую проблему на GitHub, посвященную ошибке, которую вы нашли, вашим следующим действием будет . (О сообщениях о проблемах безопасности смотрите следующий раздел.)</p>
<p>Ваш отчет о проблеме должен, как минимум, содержать заголовок и ясное описание проблемы. Следует включить как можно больше релевантной информации, и следует опубликовать пример кода, демонстрирующего проблему. Будет даже лучше, если вы включите юнит-тест, демонстрирующий не произошедшее ожидаемое поведение. Вашей целью должно быть упрощение для себя — и для других — в воспроизведении бага и понимании, как его починить.</p>
<p>А затем, не теряйте надежды! Если у вас некритичный баг, вы создаете этот отчет о проблеме в надежде, что другие с той же проблемой смогут взаимодействовать с вами, чтобы ее решить. Не ожидайте, что этот отчет о проблеме автоматически увидит какую-либо активность, или что другие переключатся на нее, чтобы починить. Создание отчета о подобной проблеме является больше помощью самому себе на пути к починке проблемы и другим для подтверждения ее с помощью комментария "I'm having this problem too".</p>
<h4 id="sozdanie-otdelnogo-otcheta-o-probleme-s-active-record-i-action-controller" class="inside_page_header"> Создание отдельного отчета о проблеме с Active Record и Action Controller</h4>
<p>Если вы заполняете отчет о баге, используйте
 или
, если баг обнаружен в опубликованном геме, и
 или
, если баг произошел в ветке master.</p>
<h4 id="osobaya-traktovka-problem-bezopasnosti" class="inside_page_header"> Особая трактовка проблем безопасности</h4>
<div class="warning"><p>Пожалуйста, не сообщайте об уязвимостях в безопасности с помощью публичных отчетов о проблеме на GitHub.  подробно излагает процедуру для проблем безопасности.</p></div>
<h4 id="chto-naschet-zaprosov-o-novoy-fiche" class="inside_page_header"> Что насчет запросов о новой фиче?</h4>
<p>Пожалуйста не складывайте "feature request" в GitHub Issues. Если имеется новая фича, которую вы бы хотели видеть добавленной в Ruby on Rails, вам необходимо написать код самим, или убедить кого-то другого помочь вам с написанием кода. Позже в этом руководстве будут даны подробные инструкции по предложению изменений в Ruby on Rails. Если вы опубликуете список пожеланий в GitHub Issues без кода, будьте уверены, он будет помечен "invalid", как только будет рассмотрен.</p>
<p>Иногда грань между 'баг' и 'фича' трудно провести. Как правило, фича — это все, что добавляет новое поведение, в то время как баг — это все, что исправляет уже существующее неправильное поведение. Иногда основная команда будет делать личное суждение. Это означает, как правило, что различие лишь влияет на то, в какой релиз пойдет ваше изменение; они любят представление фич! Они всего лишь не портируют их в поддерживаемые ветки.</p>
<p>Если вы хотите получить обратную связь на идею фичи до того, как начнете работать над изменениями, напишите письмо в . Вы можете не получить откликов, что означает, что всем безразлично. Вы можете найти кого-то, кто также заинтересован в создании этой фичи. Вы можете получить "This won't be accepted." Но это подходящее место для обсуждения новых идей. GitHub Issues являются не особо хорошим местом для проведения длительных и обширных обсуждений новых фич.</p>
<h3 id="pomosch-v-razreshenii-suschestvuyuschih-problem" class="inside_page_header"> Помощь в разрешении существующих проблем</h3>
<p>В качестве следующего шага после сообщения о проблемах, вы можете помочь основной команде разрешить существующие проблемы. Если вы посмотрите на список  в GitHub Issues, вы обнаружите множество проблем, требующих сейчас внимания. Что вы можете с ними сделать? Фактически, немного:</p>
<h4 id="podtverdit-soobschenie-o-bage" class="inside_page_header"> Подтвердить сообщение о баге</h4>
<p>Начинающие могут помочь только в подтверждении сообщений о багах. Сможете ли вы воспроизвести сообщенную проблему на своем компьютере? Если так, можете добавить комментарий к проблеме, что вы наблюдали то же самое.</p>
<p>Если что-то очень расплывчатое, сможете ли вы помочь выделить из него что-то конкретное? Может быть вы сможете предоставить дополнительную информацию, чтобы помочь воспроизвести баг, или помочь в устранении ненужных шагов, не требуемых для демонстрации проблемы.</p>
<p>Если вы обнаружили сообщение о баге без теста, было бы полезным внести вклад, написав падающий тест. Это также отличный способ исследования исходного кода: глядя на существующие файлы тестов, вы научитесь, как писать больше тестов. Новые тесты лучше всего вносить в виде изменений, как объяснено позже в разделе "Вносим вклад в код Rails".</p>
<p>Все, что вы сможете сделать, чтобы отчеты о баге стали более краткими и более простыми для воспроизведения — это помочь ребятам, пытающимся починить эти баги — независимо от того, дойдете вы до написания кода, или нет.</p>
<h4 id="protestirovat-izmeneniya" class="inside_page_header"> Протестировать изменения</h4>
<p>Также можно помочь, изучая пул-реквесты, которые были отправлены в Ruby on Rails с помощью GitHub. Для применения чьих-то изменений, вам сначала необходимо создать отдельную ветку:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout -b testing_branch

</pre>
</div>
<p>Затем вы можете использовать их удаленную ветку для обновления кода в своей. Например, скажем, что на GitHub пользователь JohnSmith форкнул и запушил в ветку "orange", расположенную в .</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git remote add JohnSmith git://github.com/JohnSmith/rails.git
$ git pull JohnSmith orange

</pre>
</div>
<p>После применения его ветки, протестируйте ее! Вот несколько вещей, о которых стоит подумать:</p>
<ul>
<li>Работает ли фактически это изменение?
</li>
<li>Довольны ли вы тестами? Сможете ли вы выполнить то, что они тестируют? Нет ли отсутствующих тестов?
</li>
<li>Имеется ли достаточное покрытие документацией? Должна ли быть обновлена документация где-то еще?
</li>
<li>Нравится ли вам реализация? Можете подумать о более красивом или быстром способе реализации части его изменений?
</li>
</ul>
<p>Как только вы будете довольны тем, что пул-реквест содержит хорошее изменение, прокомментируйте на GitHub, что вы одобряете. Ваш комментарий должен показать, что вам нравится изменение, и что вы думаете о нем. Что-то вроде:</p>
<blockquote>
<p>I like the way you've restructured that code in generate_finder_sql - much nicer. The tests look good too.</p>
</blockquote>
<p>Если ваш комментарий просто содержит "+1", есть шанс, что прочие ревьюверы не воспримут его серьезно. Покажите, что вы потратили время на обзор этого пул-реквеста.</p>
<h3 id="vnosim-vklad-v-dokumentatsiyu-rails" class="inside_page_header"> Вносим вклад в документацию Rails</h3>
<p>В Ruby on Rails имеется два главных набора документации: руководства, помогающие изучить Ruby on Rails, и API, также служащее в качестве эталона.</p>
<p>Вы можете помочь в улучшении руководств по Rails, сделав их более последовательными или читаемыми, добавив отсутствующую информацию, исправив имеющиеся ошибки, скорректировав описки или обновив их в соответствие крайней версии Rails. Если хотите быть вовлечены в перевод руководств по Rails, посмотрите .</p>
<p>Вы можете либо открыть пул-реквест в  или попросить  открыть доступ к , если вы вносите вклад регулярно.  Пожалуйста, не открывайте пул-реквесты в docrails, если хотите получить обратную связь на свои изменения, попросите ее лучше в .</p>
<p>Docrails регулярно сливается с master, таким образом вы можете эффективно редактировать документацию Ruby on Rails.</p>
<p>Если вы не уверены в изменениях документации, можете создать проблему в трекере  на GitHub.</p>
<p>При работе с документацией принимайте во внимание  и .</p>
<div class="note"><p>Как объяснялось ранее, обычные исправления кода должны сопровождаться соответствующим покрытием документацией. Docrails используется только для изолированного улучшения документации.</p></div>
<div class="note"><p>Чтобы помочь нашим серверам CI, следует добавлять [ci skip] в сообщения вашего коммита в документацию, чтобы они игнорировали этот коммит. Пожалуйста, используйте его для коммитов, содержащих только изменения документации.</p></div>
<div class="warning"><p>В docrails имеется очень строгая политика: не должен быть затронут какой-либо код, неважно, насколько тривиально или мало изменение. С помощью docrails может быть отредактированы только RDoc и руководства. А также, CHANGELOG никогда не должны правиться в docrails.</p></div>
<h3 id="vnosim-vklad-v-kod-rails" class="inside_page_header"> Вносим вклад в код Rails</h3>
<h4 id="nastraivaem-sredu-razrabotki" class="inside_page_header"> Настраиваем среду разработки</h4>
<p>Чтобы продвинуться от подтверждения багов к помощи в разрешении существующих проблем или внесения собственного кода в Ruby on Rails, вы <em>должны</em> уметь запускать его тестовый набор. В этом разделе руководства вы изучите, как настроить тесты на своем компьютере.</p>
<h5 id="prostoy-sposob" class="inside_page_header"> Простой способ</h5>
<p>Простейшим и рекомендованным способом получить среду разработки, готовую для программирования, является использование .</p>
<h5 id="slozhnyy-sposob" class="inside_page_header"> Сложный способ</h5>
<p>В случае, если вы не можете использовать Rails development box, смотрите .</p>
<h4 id="klonirovanie-repozitoriya-rails" class="inside_page_header"> Клонирование репозитория Rails</h4>
<p>Чтобы вносить изменения в код, необходимо клонировать репозиторий Rails:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git clone git://github.com/rails/rails.git

</pre>
</div>
<p>и создать отдельную ветку:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd rails
$ git checkout -b my_new_branch

</pre>
</div>
<p>Не имеет значения, какое имя вы используете, так как эта ветка существует только на вашем локальном компьютере и вашем персональном репозитории на GitHub. Она не будет частью гит-репозитория Rails.</p>
<h4 id="bundle-install" class="inside_page_header"> Bundle install</h4>
<p>Установите требуемые гемы.</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ bundle install

</pre>
</div>
<h4 id="zapusk-prilozheniya-na-vashey-lokalnoy-vetke" class="inside_page_header"> Запуск приложения на вашей локальной ветке</h4>
<p>Если вам нужно приложение Rails для тестирования изменений, флажок <code>--dev</code> для <code>rails new</code> создаст приложение, использующее вашу локальную ветку:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd rails
$ bundle exec rails new ~/my-test-app --dev

</pre>
</div>
<p>Приложение, созданное в <code>~/my-test-app</code> запускается на вашей локальной ветке, и, в частности, видит любые изменения после перезагрузки сервера.</p>
<h4 id="pishite-svoy-kod" class="inside_page_header"> Пишите свой код</h4>
<p>Пора заняться делом и добавить/отредактировать код. Раз вы в своей ветке, вы можете писать все, что хотите (убедитесь, что вы в правильной ветке с помощью <code>git branch -a</code>). Но если вы планируете отправить ваше изменение для включения в Rails, имейте в виду несколько вещей:</p>
<ul>
<li>Пишите правильный код.
</li>
<li>Используйте идиомы и хелперы Rails.
</li>
<li>Включайте тесты, которые падают без вашего кода, и проходят с ним.
</li>
<li>Обновляйте документацию, примеры и руководства: все, что было затронуто вашим вкладом.
</li>
</ul>
<div class="info"><p>Изменения, которые по природе косметические, и не добавляют ничего ощутимого в стаблильность, функциональность или тестируемость Rails, обычно не принимаются (читайте подробнее об ).</p></div>
<h5 id="follow-the-coding-conventions" class="inside_page_header">  Следуйте соглашениям по программированию</h5>
<p>Rails следует простому набору соглашений о стиле кода:</p>
<ul>
<li>Два пробела, нет табуляции (для отступов).
</li>
<li>Нет конечных пробелов. Пустые строчки не должны иметь пробелов.
</li>
<li>Отступ после private/protected.
</li>
<li>Используйте синтаксис Ruby &gt;= 1.9 для хэшей. Предпочитайте <code>{ a: :b }</code> над <code>{ :a =&gt; :b }</code>.
</li>
<li>Предпочитайте <code>&amp;&amp;</code>/<code>||</code> над <code>and</code>/<code>or</code>.
</li>
<li>Предпочитайте <code>class &lt;&lt; self</code> над <code>self.method</code> для методов класса.
</li>
<li>Используйте <code>my_method(my_arg)</code>, а не <code>my_method( my_arg )</code> или <code>my_method my_arg</code>.
</li>
<li>Используйте <code>a = b</code>, а не <code>a=b</code>.
</li>
<li>Используйте методы <code>assert_not</code> вместо отрицаний.
</li>
<li>Предпочитайте <code>method { do_stuff }</code> вместо <code>method{do_stuff}</code> для однострочных блоков.
</li>
<li>Следуйте соглашениям в исходном коде, которые вы уже видели.
</li>
</ul>
<p>Вышеприведенное является руководящими указаниями — используйте собственные суждения при их использовании.</p>
<h4 id="testiruyte-proizvoditelnost-svoego-koda" class="inside_page_header"> Тестируйте производительность своего кода</h4>
<p>Если ваше изменение влияет на производительность Rails, используйте гем , чтобы представить результаты тестирования производительности для сравнения.</p>
<p>Вот результат использования benchmark-ips:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
require 'benchmark/ips'

Benchmark.ips do |x|
  x.report('addition') { 1 + 2 }
  x.report('addition with send') { 1.send(:+, 2) }
end

</pre>
</div>
<p>Это сгенерирует отчет со следующей информацией:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
Calculating -------------------------------------
            addition   132.013k i/100ms
  addition with send   125.413k i/100ms
-------------------------------------------------
            addition      9.677M (± 1.7%) i/s -     48.449M
  addition with send      6.794M (± 1.1%) i/s -     33.987M

</pre>
</div>
<p>Подробнее смотрите в benchmark/ips .</p>
<h4 id="zapusk-testov" class="inside_page_header"> Запуск тестов</h4>
<p>В Rails не является необходимым запускать полный тестовый набор перед отправкой изменений. В частности, тестовый набор railties занимает много времени, и даже еще больше, если исходный код монтирован в <code>/vagrant</code>, как происходит в рекомендованном рабочем процессе с помощью .</p>
<p>В качестве компромисса, тестируйте то, на что ваш код явно влияет, и, если изменение не в railties, запускайте полный тестовый набор затронутого компонента. Если все тесты проходят, этого достаточно, чтобы предложить ваш вклад. У нас есть  в качестве безопасной сети для отлова неожиданных поломок где-то еще.</p>
<h5 id="ves-rails" class="inside_page_header"> Весь Rails:</h5>
<p>Чтобы запустить все тесты, выполните:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd rails
$ bundle exec rake test

</pre>
</div>
<h5 id="dlya-opredelennogo-komponenta" class="inside_page_header"> Для определенного компонента</h5>
<p>Можно запустить тесты только для определенного компонента (такого как Action Pack). Например, чтобы запустить тесты Action Mailer:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd actionmailer
$ bundle exec rake test

</pre>
</div>
<h5 id="zapusk-otdelnogo-testa" class="inside_page_header"> Запуск отдельного теста</h5>
<p>С помощью ruby можно запустить отдельный тест. К примеру:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd actionmailer
$ ruby -w -Itest test/mail_layout_test.rb -n test_explicit_class_layout

</pre>
</div>
<p>Опция <code>-n</code> позволяет запустить отдельный метод вместо всего файла.</p>
<h5 id="testirovanie-active-record" class="inside_page_header"> Тестирование Active Record</h5>
<p>Сначала создайте необходимые вам базы данных. Для MySQL и PostgreSQL необходим запуск выражений SQL <code>create database activerecord_unittest</code> и <code>create database activerecord_unittest2</code>. Для SQLite3 это необязательно.</p>
<p>Вот как можно запустить тестовый набор Active Record только для SQLite3:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ cd activerecord
$ bundle exec rake test:sqlite3

</pre>
</div>
<p>Теперь вы можете запускать тесты, как вы делали для <code>sqlite3</code>. Соответствующие задачи</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
test:mysql
test:mysql2
test:postgresql

</pre>
</div>
<p>Наконец,</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ bundle exec rake test

</pre>
</div>
<p>запустит все четыре по очереди.</p>
<p>Также можно запустить любой одиночный тест отдельно:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ ARCONN=sqlite3 ruby -Itest test/cases/associations/has_many_associations_test.rb

</pre>
</div>
<p>Чтобы запустить одиночный тест на всех адаптерах, используйте:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ bundle exec rake TEST=test/cases/associations/has_many_associations_test.rb

</pre>
</div>
<p>Также можно вызвать <code>test_jdbcmysql</code>, <code>test_jdbcsqlite3</code> или <code>test_jdbcpostgresql</code>. Информацию по запуску нацеленных на базу данных тестов смотрите в файле <code>activerecord/RUNNING_UNIT_TESTS.rdoc</code>, а по запуску тестового набора на сервере CI в файле <code>ci/travis.rb</code>.</p>
<h4 id="preduprezhdeniya" class="inside_page_header"> Предупреждения</h4>
<p>Тестовый набор запускается с включенными предупреждениями. В идеале, Ruby on Rails не должен выдавать предупреждения, но их может быть несколько, в том числе от сторонних библиотек. Пожалуйста, игнорируйте (или почините!) их, если имеются, и отправляйте изменения, не имеющих новых предупреждений.</p>
<p>Если вы знаете, что делаете, и хотите получить более чистый вывод, есть возможность переопределить флажок:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ RUBYOPT=-W0 bundle exec rake test

</pre>
</div>
<h4 id="obnovlenie-changelog" class="inside_page_header"> Обновление CHANGELOG</h4>
<p>CHANGELOG — это важная часть каждого релиза. Он содержит  список изменений для каждой версии Rails.</p>
<p>Вам следует добавить запись <strong>в самый верх</strong> CHANGELOG того фреймворка, который вы изменили, если вы добавили или убрали особенность, исправили ошибку или добавили предупреждения об устаревании. Рефакторинг и изменения документации обычно не идут в CHANGELOG.</p>
<p>Запись в CHANGELOG должна кратко описывать то, что было изменено, и заканчиваться именем автора. Можно использовать несколько строчек, если необходимо место, а также можно прикрепить примеры кода с отступом в 4 пробела. Если изменение относится к определенной проблеме, следует прикрепить номер проблемы. Вот пример записи в CHANGELOG:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
*   Summary of a change that briefly describes what was changed. You can use multiple
    lines and wrap them at around 80 characters. Code examples are ok, too, if needed:

        class Foo
          def bar
            puts 'baz'
          end
        end

    You can continue after the code example and you can attach issue number. GH#1234

    *Your Name*

</pre>
</div>
<p>Ваше имя может быть добавлено непосредственно после последнего слова, если вы не предоставляете примеры кода и не нуждаетесь в нескольких параграфах. В противном случае, лучше добавить его как новый параграф.</p>
<h4 id="obnovlenie-gemfile-lock" class="inside_page_header"> Обновление Gemfile.lock</h4>
<p>Некоторые изменения требуют обновления зависимостей. В таких случаях убедитесь, что вы запустили <code>bundle update</code>, чтобы получить правильную версию зависимости и сделайте коммит с файлом <code>Gemfile.lock</code> со своими изменениями.</p>
<h4 id="proverka-razumnosti" class="inside_page_header"> Проверка разумности</h4>
<p>Вы не должны быть единственным, кто смотрит на код до того, как отправить его. Если вы знаете кого-то еще, использующего Rails, попробуйте попросить их посмотреть на вашу работу. Если вы не знаете кого-то, использующего Rails, попробуйте войти в комнату IRC или опубликовать свою идею в рассылке rails-core. Сделав это приватно до того, как вы отправите изменения публично, является "smoke test" для патча: если вы не сможете убедить другого разработчика в красоте своего кода, вы вряд ли убедите в этом члена основной команды.</p>
<h4 id="kommit-vashih-izmeneniy" class="inside_page_header"> Коммит ваших изменений</h4>
<p>Когда вы довольны своим кодом на своем компьютере, необходимо закоммитить изменения в Git:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git commit -a

</pre>
</div>
<p>В этом месте должен запуститься ваш редактор, и вы сможете написать сообщение для этого коммита. Хорошо отформатированное и содержательное сообщение коммита чрезвычайно полезно для остальных, особенно при выяснении, зачем было сделано изменение, поэтому найдите время написать его.</p>
<p>Хорошее сообщение коммита должно быть отформатировано в соответствии со следующим примером:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
Short summary (ideally 50 characters or less)

More detailed description, if necessary. It should be wrapped to 72
characters. Try to be as descriptive as you can, even if you think that
the commit content is obvious, it may not be obvious to others. You
should add such description also if it's already present in bug tracker,
it should not be necessary to visit a webpage to check the history.

Description can have multiple paragraphs and you can use code examples
inside, just indent it with 4 spaces:

    class ArticlesController
      def index
        render json: Article.limit(10)
      end
    end

You can also add bullet points:

- you can use dashes or asterisks

- also, try to indent next line of a point for readability, if it's too
  long to fit in 72 characters

</pre>
</div>
<div class="info"><p>Пожалуйста, склеивайте свои коммиты в один коммит, когда это уместно. Это упрощает будущие черри-пики, а также поддерживает чистоту лога.</p></div>
<h4 id="obnovlenie-vashey-vetki" class="inside_page_header"> Обновление вашей ветки</h4>
<p>Очень вероятно, что были сделаны другие изменения в master, пока вы работали. Получите их:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout master
$ git pull --rebase

</pre>
</div>
<p>Теперь можно применить ваш патч на последних изменениях:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout my_new_branch
$ git rebase master

</pre>
</div>
<p>Нет конфликтов? Тесты все еще проходят? Изменения еще актуальны? Продолжайте.</p>
<h4 id="fork" class="inside_page_header"> Форк</h4>
<p>Перейдите в репозиторий Rails  и нажмите "Fork" в верхнем правом углу.</p>
<p>Добавьте новый удаленный репозиторий к вашему локальному:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git remote add mine git@github.com:&lt;your user name&gt;/rails.git

</pre>
</div>
<p>Отправляйте в свой удаленный репозиторий:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git push mine my_new_branch

</pre>
</div>
<p>Возможно, у вас есть клонированный форк-репозиторий, и вы хотите добавить удаленным оригинальный репозиторий Rails, в этом случае вот что вам нужно сделать.</p>
<p>В директории, в которую вы клонировали свой форк:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git remote add rails git://github.com/rails/rails.git

</pre>
</div>
<p>Скачать новые коммиты и ветки из официального репозитория:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git fetch rails

</pre>
</div>
<p>Смержить новое содержимое:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout master
$ git rebase rails/master

</pre>
</div>
<p>Обновить ваш форк:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git push origin master

</pre>
</div>
<p>Если хотите обновить другую ветку:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout branch_name
$ git rebase rails/branch_name
$ git push origin branch_name

</pre>
</div>
<h4 id="sozdanie-pul-rekvesta" class="inside_page_header"> Создание пул-реквеста</h4>
<p>Перейдите в репозиторий Rails, в который вы только что отправили код (т.е. ) и нажмите на "Pull Requests" в правой панели. На следующей странице нажмите "New pull request" в верхнем правом углу.</p>
<p>Нажмите на "Edit", если необходимо изменить сравниваемые ветки (по умолчанию он сравнивает "master") и нажмите "Click to create a pull request for this
comparison".</p>
<p>Убедитесь, что включены изменения, которые вы представили. Заполните некоторыми подробностями о вашем потенциальном патче, включая осмысленный заголовок. Когда закончите, нажмите "Send pull request". Основная команда Rails будет уведомлена о вашем изменении.</p>
<h4 id="poluchenie-obratnoy-svyazi" class="inside_page_header"> Получение обратной связи</h4>
<p>Большая часть пул-реквестов пройдут через ряд итераций до того, как они будут влиты. У разных контрибьюторов иногда разные мнения, и часто изменения нуждаются в пересмотре до того, как их можно влить.</p>
<p>У некоторых контрибьюторов в Rails включены уведомления по email с GitHub, у некоторых нет. Более того, (почти) все, кто работает над Rails, являются добровольцами, поэтому может пройти несколько дней до того, как вы получите первую обратную связь на пул-реквест. Не отчаивайтесь! Иногда это быстро, иногда это медленно. Такова жизнь открытого ПО.</p>
<p>Если прошло больше недели, и вам никто не ответил, можете попытаться немного ускорить процесс. Для этого используйте . Также можно оставить комментарий в своем пул-реквесте.</p>
<p>ПОка вы ждете обратную связь на свой пул-реквест, откройте несколько чужих пул-реквестов и дайте обратную связь кому-то еще! Мы уверены, они будут признательны за это не меньше, чем вы были бы признательны за обратную связь на ваши изменения.</p>
<h4 id="povtorenie-po-neobhodimosti" class="inside_page_header"> Повторение по необходимости</h4>
<p>Очень вероятно, что полученная обратная связь предложит изменения. Не отчаивайтесь: весь смысл вклада в активный проект с открытым кодом заключается в том, чтобы использовать знания сообщества. Если люди призывают подправить ваш код, то стоит внести правки и отправить заново. Если обратная связь говорит, что ваш код не нужен в ядре, вы можете подумать о выпуске его в качестве гема.</p>
<h5 id="skvosh-kommitov" class="inside_page_header"> Сквош коммитов</h5>
<p>Одной из вещей, которая может быть попрошена, является "squash your commits", которая объединит все ваши коммиты в один. Мы предпочитаем пул-реквесты с одним коммитом. Это упрощает обратное портирование в стабильные ветки, откат плохих коммитов, слежение за историей git. Rails — это большой проект, и ряд  множество посторонних коммитов может добавить много шума.</p>
<p>Чтобы сделать это, необходимо иметь git remote, указывающий на главный репозиторий Rails. Это в любом случае полезно, но если у вас он не настроен, сначала сделайте:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git remote add upstream https://github.com/rails/rails.git

</pre>
</div>
<p>Этот удаленный сервер можно назвать как угодно, но если вы не используете <code>upstream</code>, измените имя на свое в нижеследующей инструкции.</p>
<p>Предположим, что ваша ветка называется <code>my_pull_request</code>, тогда нужно сделать следующее:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git fetch upstream
$ git checkout my_pull_request
$ git rebase upstream/master
$ git rebase -i

&lt; Выберите 'squash' для всех ваших коммитов, кроме первого. &gt;
&lt; Отредактируйте сообщение коммита, чтобы оно было осмысленным, и опишите все свои изменения. &gt;

$ git push origin my_pull_request -f

</pre>
</div>
<p>Далее вам необходимо обновить пул-реквест на GitHub и посмотреть, что он был изменен.</p>
<h5 id="obnovlenie-pul-rekvesta" class="inside_page_header"> Обновление пул-реквеста</h5>
<p>Иногда вас попросят внести некоторые изменения в код, который уже был закоммичен. Это может включать исправление существующих коммитов. В этом случае Git не позволит отправить изменения, так как удаленная и локальная ветки не соответствуют друг другу. Вместо открытия нового пул-реквеста, можно принудить отправку в вашу ветку на GitHub, как описано ранее в разделе про сквош коммитов:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git push origin my_pull_request -f

</pre>
</div>
<p>Это позволит обновить ветку и пул-реквест на GitHub вашим новым кодом. Отметьте, что использование принудительной отправки может привести к потере коммитов на удаленной ветке; используйте ее осторожно.</p>
<h4 id="starshie-versii-ruby-on-rails" class="inside_page_header"> Старшие версии Ruby on Rails</h4>
<p>Если вы хотите добавить исправление в старшие версии Ruby on Rails, необходимо настроить и переключить свою локальную отслеживаемую ветку. Вот пример, как переключиться на ветку 4-0-stable:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git branch --track 4-0-stable origin/4-0-stable
$ git checkout 4-0-stable

</pre>
</div>
<div class="info"><p>Возможно, вы захотите  чтобы было проще вспомнить, над какой версией кода вы работаете.</p></div>
<h5 id="obratnoe-portirovanie" class="inside_page_header"> Обратное портирование</h5>
<p>Изменения, влитые в master, предназначены для следующего большого релиза Rails. Иногда полезно, чтобы ваши изменения попали в поддерживаемые релизы для старших стабильных веток. Как правило, хорошими кандидатами для обратного портирования являются исправления безопасности и ошибок, в то время как новые особенности и исправления, представляющие изменения в поведении, не принимаются. Когда сомневаетесь, лучше всего проконсультироваться с членом основной команды Rails до обратного портирования ваших изменений, чтобы избежать потерь времени.</p>
<p>Для простых изменений, легчайшим способом портировать ваши изменения является .</p>
<p>Сначала убедитесь, что только ваши изменения составляют разницу между вашей текущей веткой и master:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git log master..HEAD

</pre>
</div>
<p>Затем извлеките diff:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git format-patch master --stdout &gt; ~/my_changes.patch

</pre>
</div>
<p>Переключитесь в целевую ветку и примените ваши изменения:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
$ git checkout -b my_backport_branch 3-2-stable
$ git apply ~/my_changes.patch

</pre>
</div>
<p>Это хорошо работает для простых изменений. Однако, если изменения сложные, или если код в master сильно отличается от целевой ветки, это потребует большей работы с вашей стороны. Сложность портирования отличается от случая к случаю, и даже иногда не стоит усилий.</p>
<p>Как только вы разрешили все конфликты и убедились, что проходят все тесты, отправьте свои изменения и откройте отдельный пул-реквест для своего порта. Также важно отметить, что старшие ветки могут иметь другой список целевых версий, чем в master. По возможности, лучше до от отправки пул-реквеста протестировать порт локально на версиях Ruby, перечисленных в <code>.travis.yml</code>.</p>
<p>А затем... подумайте о следующем вкладе!</p>
<h3 id="avtory-rails" class="inside_page_header"> Авторы Rails</h3>
<p>Все внесшие вклад или в master, или в docrails, восхваляются в .</p>
<div class="banner">

   
   



</div>
</div>