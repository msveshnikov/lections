<p style="text-align:justify"><span style="font-size:20px">Это очень интересная группа регистров, предназначенных для аппаратной отладки. Средства аппаратной отладки впервые появились в микропроцессоре i486. Аппаратно микропроцессор содержит восемь регистров отладки, но реально из них используются только шесть.</span></p><p style="text-align:justify"><span style="font-size:20px">Регистры dr0, dr1, dr2, dr3 имеют разрядность 32 бита и предназначены для задания линейных адресов четырех точек прерывания. Используемый при этом механизм следующий: любой формируемый текущей программой адрес сравнивается с адресами в регистрах dr0 &hellip; dr3, и при совпадении генерируется исключение отладки с номером 1.</span></p><p style="text-align:justify"><span style="font-size:20px">Регистр dr6 называется регистром состояния отладки. Биты этого регистра устанавливаются в соответствии с причинами, которые вызвали возникновение последнего исключения с номером 1.</span></p><p style="text-align:justify"><span style="font-size:20px">Перечислим эти биты и их назначение:</span></p><p style="text-align:justify"><span style="font-size:20px">1)&nbsp;b0 &ndash; если этот бит установлен в 1, то последнее исключение (прерывание) возникло в результате достижения контрольной точки, определенной в регистре dr0;</span></p><p style="text-align:justify"><span style="font-size:20px">2)&nbsp;b1 &ndash; аналогично b0, но для контрольной точки в регистре dr1;</span></p><p style="text-align:justify"><span style="font-size:20px">3)&nbsp;b2 &ndash; аналогично b0, но для контрольной точки в регистре dr2;</span></p><p style="text-align:justify"><span style="font-size:20px">4)&nbsp;b3 &ndash; аналогично b0, но для контрольной точки в регистре dr3;</span></p><p style="text-align:justify"><span style="font-size:20px">5)&nbsp;bd (бит 13)&nbsp;&ndash; служит для защиты регистров отладки;</span></p><p style="text-align:justify"><span style="font-size:20px">6)&nbsp;bs (бит 14)&nbsp;&ndash; устанавливается в 1, если исключение 1 было вызвано состоянием флага tf = 1 в регистре eflags;</span></p><p style="text-align:justify"><span style="font-size:20px">7)&nbsp;bt (бит 15) устанавливается в 1, если исключение 1 было вызвано переключением на задачу с установленным битом ловушки в TSS t = 1. Все остальные биты в этом регистре заполняются нулями. Об-работчик исключения 1 по содержимому dr6 должен определить причину, по которой произошло исключение, и выполнить необходимые действия.</span></p><p style="text-align:justify"><span style="font-size:20px">Регистр dr7 называется регистром управления отладкой. В нем для каждого из четырех регистров контрольных точек отладки имеются поля, позволяющие уточнить следующие условия, при которых следует сгенерировать прерывание:</span></p><p style="text-align:justify"><span style="font-size:20px">1)&nbsp;место регистрации контрольной точки &ndash; только в текущей задаче или в любой задаче. Эти биты занимают младшие 8 бит регистра dr7 (по 2 бита на каждую контрольную точку (фактически точку прерывания), задаваемую регистрами dr0, drl, dr2, dr3 соответственно).</span></p><p style="text-align:justify"><span style="font-size:20px">Первый бит из каждой пары &ndash; это так называемое локальное разрешение; его установка говорит о том, что точка прерывания действует, если она находится в пределах адресного пространства текущей задачи.</span></p><p style="text-align:justify"><span style="font-size:20px">Второй бит в каждой паре определяет глобальное разрешение, которое говорит о том, что данная контрольная точка действует в пределах адресных пространств всех задач, находящихся в системе;</span></p><p style="text-align:justify"><span style="font-size:20px">2)&nbsp;тип доступа, по которому инициируется прерывание: только при выборке команды, при записи или при записи / чтении данных. Биты, определяющие подобную природу возникновения прерывания, локализуются в старшей части данного регистра. Большинство из системных регистров программно доступно.</span></p>