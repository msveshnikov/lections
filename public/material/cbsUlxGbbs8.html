<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p><span>Конструкторы и деструкторы являются специализированными формами методов. Используемые в связи с расширенным синтаксисом стандартных процедур New и Dispose конструкторы и деструкторы обладают способностью размещения и удаления динамических объектов. Кроме того, конструкторы имеют возможность выполнить требуемую инициализацию объектов, содержащих виртуальные методы. Как и все другие методы, конструкторы и деструкторы могут наследоваться, а объекты могут содержать любое число конструкторов и деструкторов.</span></p>
<p><span>Конструкторы используются для инициализации вновь созданных объектов. Обычно инициализация основывается на значениях, передаваемых конструктору в качестве параметров. Конструктор не может быть виртуальным, так как механизм диспетчеризации виртуального метода зависит от конструктора, который первым совершил инициализацию объекта.</span></p>
<p><span>Приведем несколько примеров конструкторов:</span></p>
<p><span>constructor Field.Copy(var F: Field);</span></p>
<p><span>begin</span></p>
<p><span>Self:= F;</span></p>
<p><span>end;</span></p>
<p><span>Главным действием конструктора порожденного (дочернего) типа почти всегда является вызов соответствующего конструктора его непосредственного родителя для инициализации наследуемых полей объекта. После выполнения этой процедуры конструктор инициализирует поля объекта, которые принадлежат только порожденному типу.</span></p>
<p><span>Деструкторы являются противоположностями конструкторови используются для очистки объектов после их использования. Обычно очистка состоит в удалении всех полей указателей в объекте.</span></p>
<p><span>Примечание</span></p>
<p><span>Деструктор может быть виртуальным и часто является таковым. Деструктор редко имеет параметры. Приведем несколько примеров деструкторов:</span></p>
<p><span>destructor Field.Done;</span></p>
<p><span>begin</span></p>
<p><span>FreeMem(Name, Length (Name^) + 1);</span></p>
<p><span>end;</span></p>
<p><span>destructor StrField.Done;</span></p>
<p><span>begin</span></p>
<p><span>FreeMem(Value, Len);</span></p>
<p><span>Field.Done;</span></p>
<p><span>end;</span></p>
<div class="fb2-empty-line"> </div>
<p><span>Деструктор дочернего типа, такой как указанный выше TStrField. Done, обычно сначала удаляет введенные в порожденном типе поля указателей, а затем в качестве последнего действия вызывает соответствующий сборщик-деструктор непосредственного родителя для удаления унаследованных полей указателей объекта.</span></p>
</body></html>
